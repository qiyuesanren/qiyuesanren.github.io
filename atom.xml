<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>安柒</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://qiyuesanren.github.io/"/>
  <updated>2020-11-27T13:15:25.475Z</updated>
  <id>https://qiyuesanren.github.io/</id>
  
  <author>
    <name>安柒</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>路由策略</title>
    <link href="https://qiyuesanren.github.io/2020/11/27/%E8%B7%AF%E7%94%B1%E7%AD%96%E7%95%A5/"/>
    <id>https://qiyuesanren.github.io/2020/11/27/路由策略/</id>
    <published>2020-11-28T00:54:57.000Z</published>
    <updated>2020-11-27T13:15:25.475Z</updated>
    
    <content type="html"><![CDATA[<h1 id="路由策略"><a href="#路由策略" class="headerlink" title="路由策略"></a>路由策略</h1><p>路由器的规制</p><ul><li>基于目的的，尽力而为的转发</li><li>对数据<code>3层报头</code>(网络层)中的<code>目的IP</code>，与自己的<code>路由表</code>做匹配</li></ul><p>实验环境为：eNSP</p><h2 id="ACL-访问控制列表"><a href="#ACL-访问控制列表" class="headerlink" title="ACL(访问控制列表)"></a>ACL(访问控制列表)</h2><p>功能：通过对<code>3层，4层</code>报头的指定字段进行匹配，实现数据包的管控</p><p>IP数据包五元组：</p><ul><li>源IP地址</li><li>目的IP地址</li><li>协议号</li><li>源端口号</li><li>目的端口号</li></ul><p>方式：如果数据匹配直接deny(干掉)，不匹配的话，正常通过。</p><p>类型：</p><ul><li>基础ACL：只匹配<code>源IP地址</code></li><li>增强ACL：对五元组进行检查</li></ul><p>ACL调用：设备接口的方向(是接收到的数据检查ACL，还是发送的数据检查ACL)</p><p>规则：</p><ul><li>ACL的规则是<code>逐条匹配</code>，只要匹配上了，后面便不会看了，</li><li>写入规则是按照条目由精确到模糊</li><li>ACL 末尾隐含deny any(拒绝所有)，只要考虑使用ACL，那么该ACL至少包括一条permit(放行)语句</li><li>ACL<strong>不检查自身发起的流量</strong></li></ul><img src="/2020/11/27/路由策略/1.png" title="This is an example image"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">R1 为RIP</span><br><span class="line">GE0/0/0为192.168.1.1/26</span><br><span class="line">RIP 的 network 192.168.1.0</span><br><span class="line">因为 </span><br><span class="line">A类IP段：0.0.0.0 到 127.255.255.255.</span><br><span class="line">A类 网段都是x.0.0.0</span><br><span class="line"></span><br><span class="line">B类IP段：128.0.0.0 到 191.255.255.255.</span><br><span class="line">B类 网段都是x.x.0.0</span><br><span class="line"></span><br><span class="line">C类IP段：192.0.0.0 到 223.255.255.255.</span><br><span class="line">C类 网段都是x.x.x.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">R3 为OSPF</span><br><span class="line">loopback 0 为192.168.3.3/26</span><br><span class="line">OSPF 的通配符掩码为</span><br><span class="line">0.0.0.32-26=6=255-128-64=63</span><br></pre></td></tr></table></figure><p>实现：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">基础ACL</span><br><span class="line">1.创建ACL表，声明该表是何种类型</span><br><span class="line">[R2]acl name haha basic </span><br><span class="line">[R2-acl-basic-haha] </span><br><span class="line">或者</span><br><span class="line">[R2]acl 2000</span><br><span class="line">[R2-acl-basic-2000]</span><br><span class="line">因为</span><br><span class="line">INTEGER&lt;2000-2999&gt;  Basic access-list(add to current using rules)</span><br><span class="line">INTEGER&lt;3000-3999&gt;  Advanced access-list(add to current using rules)</span><br><span class="line">INTEGER&lt;4000-4999&gt;  Specify a L2 acl group</span><br><span class="line">所以直接ACL 2000 也是可以滴</span><br><span class="line"></span><br><span class="line">2.根据策略写条目</span><br><span class="line">rule deny source 192.68.1.1 0.0.0.0(通配符掩码，如果通配符掩码指的是一个主机，那么通配符为全0)</span><br><span class="line"></span><br><span class="line">3.在接口的方向上进行注入ACL</span><br><span class="line">[R2]interface GigabitEthernet 0/0/0</span><br><span class="line">[R2-GigabitEthernet0/0/0]traffic-filter inbound acl 2000</span><br><span class="line">traffic-filter流量过滤</span><br><span class="line">inbound 进方向</span><br><span class="line">outbound  出方向</span><br><span class="line"></span><br><span class="line">观察命令display acl 2000</span><br><span class="line"></span><br><span class="line">取消ACL注入</span><br><span class="line">[R2-GigabitEthernet0/0/0]undo traffic-filter inbound</span><br><span class="line"></span><br><span class="line">删除ACL 2000</span><br><span class="line">[R2]display acl 2000</span><br><span class="line">Basic ACL 2000, 1 rule</span><br><span class="line">Acl&apos;s step is 5</span><br><span class="line"> rule 5 deny source 192.168.1.1 0 </span><br><span class="line">[R2]undo acl 2000</span><br><span class="line">[R2]display acl 2000</span><br><span class="line">[R2] 啥都没有了</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">扩展ACl</span><br><span class="line">[R2]acl 3000</span><br><span class="line">[R2-acl-adv-3000]rule deny ?</span><br><span class="line">  &lt;1-255&gt;  Protocol number</span><br><span class="line">  gre      GRE tunneling(47)</span><br><span class="line">  icmp     Internet Control Message Protocol(1)</span><br><span class="line">  igmp     Internet Group Management Protocol(2)</span><br><span class="line">  ip       Any IP protocol</span><br><span class="line">  ipinip   IP in IP tunneling(4)</span><br><span class="line">  ospf     OSPF routing protocol(89)</span><br><span class="line">  tcp      Transmission Control Protocol (6)</span><br><span class="line">  udp      User Datagram Protocol (17)</span><br><span class="line">单元组ACL</span><br><span class="line">[R2-acl-adv-3000]rule deny icmp source 192.168.1.1 0.0.0.0 destination 192.168.3.3 0.0.0.0</span><br><span class="line">多元组ACL</span><br><span class="line">[R2-acl-adv-3000]rule deny tcp source 192.168.1.1 0.0.0.0 source-port</span><br><span class="line"></span><br><span class="line">调用</span><br><span class="line">[R2]interface GigabitEthernet 0/0/0</span><br><span class="line">[R2-GigabitEthernet0/0/0]traffic-filter inbound acl 3000</span><br><span class="line"></span><br><span class="line">取消调用</span><br><span class="line">[R2]interface GigabitEthernet 0/0/0</span><br><span class="line">[R2-GigabitEthernet0/0/0]undo traffic-filter inbound </span><br><span class="line"></span><br><span class="line">删除ACL 3000</span><br><span class="line">[R2]display acl 3000</span><br><span class="line">Advanced ACL 3000, 1 rule</span><br><span class="line">Acl&apos;s step is 5</span><br><span class="line">rule 5 deny icmp source 192.168.1.1 0 destination 192.168.3.3 0 </span><br><span class="line">[R2]undo acl 3000</span><br><span class="line">[R2]display acl 3000</span><br><span class="line">[R2] 啥都没有了</span><br></pre></td></tr></table></figure><h2 id="IP-Prefix前缀列表"><a href="#IP-Prefix前缀列表" class="headerlink" title="IP-Prefix前缀列表"></a>IP-Prefix前缀列表</h2><p>功能：对路由更新包中的更新<code>网段</code>字段进行匹配，实现管控，在协议中调用</p><p>规则：</p><ul><li>ACL的规则是<code>逐条匹配</code>，只要匹配上了，后面便不会看了，</li><li>写入规则是按照条目由精确到模糊</li><li>ACL 末尾隐含deny any(拒绝所有)，只要考虑使用ACL，那么该ACL至少包括一条permit(放行)语句</li><li>ACL<strong>不检查自身发起的流量</strong></li></ul><p>案例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ip ip-prefix haha(名字) premit 192.168.1.0 24</span><br><span class="line">匹配：24位的IP(192.168.1）是一样的 且子网掩码为24位，则匹配</span><br><span class="line">ip ip-prefix haha(名字) premit 192.168.1.0 24 greter-euqal 25</span><br><span class="line">匹配：24位的IP(192.168.1）是一样的 且子网掩码大于等于25位的，则匹配</span><br><span class="line">例：192.168.1.128 /25(26,27,28,29,30,31) 可以通过</span><br><span class="line">ip ip-prefix haha(名字) premit 192.168.1.0 24 less-euqal 28</span><br><span class="line">匹配：24位的IP(192.168.1）是一样的 且子网掩码小于等于28位的(28-24)，则匹配</span><br></pre></td></tr></table></figure><p>上手：</p><img src="/2020/11/27/路由策略/1.png" title="This is an example image"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">创建</span><br><span class="line">[R2]ip ip-prefix haha deny 192.168.1.0 26</span><br><span class="line"></span><br><span class="line">调用，因为 192.168.1.0 是RIp 所以得在RIP中调用</span><br><span class="line">[R2]rip</span><br><span class="line">[R2-rip-1]version 2</span><br><span class="line">[R2-rip-1]filter-policy ip-prefix haha import</span><br><span class="line"></span><br><span class="line">删除调用</span><br><span class="line">[R2]rip</span><br><span class="line">[R2-rip-1]version 2</span><br><span class="line">[R2-rip-1]undo filter-policy ip-prefix haha import </span><br><span class="line"></span><br><span class="line">删除ip-prefix</span><br><span class="line">[R2]undo ip ip-prefix haha</span><br></pre></td></tr></table></figure><h2 id="Route-Policy-路由策略表"><a href="#Route-Policy-路由策略表" class="headerlink" title="Route-Policy(路由策略表)"></a>Route-Policy(路由策略表)</h2><p>功能：功能强大，数据包管控，更新包管控，数据内容管控，打标签(网络某个位置打标签，另外的位置否定)</p><p>规则：</p><ul><li>ACL的规则是<code>逐条匹配</code>，只要匹配上了，后面便不会看了，</li><li>写入规则是按照条目由精确到模糊</li><li>ACL 末尾隐含deny any(拒绝所有)，只要考虑使用ACL，那么该ACL至少包括一条permit(放行)语句</li><li>ACL<strong>不检查自身发起的流量</strong></li></ul><p>主条目：</p><ul><li><p>匹配子条目</p></li><li><p>执行子条目</p></li><li><p>案例：</p></li><li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">第三步 route-policy haha permit node 10</span><br><span class="line">//这是haha表的第10条主条目   如果子条目，执行子条目，则主条目通过  </span><br><span class="line">第一步 if-match souce-ip 192.168.1.0 255.255.255.0   //如果没有匹配子条目，则匹配any</span><br><span class="line">第二步 apply cost=100//如果没有执行子条目，则按照主条目执行permit或者deny</span><br></pre></td></tr></table></figure></li></ul><p>上手</p><img src="/2020/11/27/路由策略/1.png" title="This is an example image"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">[R2]acl 2000</span><br><span class="line">[R2-acl-basic-2000]rule  permit source 192.168.1.0 0.0.0.63 // permit(感兴趣)</span><br><span class="line"></span><br><span class="line">[R2]route-policy haha permit node 10</span><br><span class="line">route-policy haha permit node 10</span><br><span class="line">Info: New Sequence of this List.</span><br><span class="line">[R2-route-policy]if</span><br><span class="line">[R2-route-policy]if-match acl 2000</span><br><span class="line"></span><br><span class="line">[R2-route-policy]apply ?</span><br><span class="line">  as-path           BGP AS path list</span><br><span class="line">  backup-interface  Backup outgoing interface</span><br><span class="line">  backup-nexthop    Backup nexthop address</span><br><span class="line">  behavior          Specify QoS policy as behavior</span><br><span class="line">  comm-filter       Set BGP community filter (for deletion)</span><br><span class="line">  community         BGP community attribute</span><br><span class="line">  cost              Set metric of route</span><br><span class="line">  cost-type         Type of metric for destination routing protocol</span><br><span class="line">  dampening         Set BGP route flap dampening parameters</span><br><span class="line">  extcommunity      Set BGP/VPN extended community filter</span><br><span class="line">  ip-address        IP information</span><br><span class="line">  ip-precedence     Specify QoS policy as IP precedence</span><br><span class="line">  ipv6              IPv6 Information</span><br><span class="line">  isis              Where to import route</span><br><span class="line">  local-preference  BGP local preference path attribute</span><br><span class="line">  mpls-label        Give the Label</span><br><span class="line">  origin            BGP origin code</span><br><span class="line">  ospf              Where to import route</span><br><span class="line">  preference        Give the Preference  (Route Preference)</span><br><span class="line">  preferred-value   BGP Preferred-value (weight) for routing table</span><br><span class="line">  qos-local-id      Specify QoS policy as qos local id</span><br><span class="line">  tag               Set tag of route</span><br><span class="line">  traffic-index     Specify BGP Traffic Accounting Index</span><br><span class="line"></span><br><span class="line">[R2-route-policy]apply cost 100</span><br><span class="line"></span><br><span class="line">[R2-route-policy]display this</span><br><span class="line">[V200R003C00]</span><br><span class="line">#</span><br><span class="line">route-policy haha permit node 10 </span><br><span class="line"> if-match acl 2000 </span><br><span class="line"> apply cost 100 </span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line">[R2-route-policy]</span><br><span class="line"></span><br><span class="line">注入</span><br><span class="line">[R2]ospf</span><br><span class="line">[R2-ospf-1]undo import-route rip </span><br><span class="line">[R2-ospf-1]import-route rip route-policy haha</span><br></pre></td></tr></table></figure><h2 id="策略路由-策略转发"><a href="#策略路由-策略转发" class="headerlink" title="策略路由(策略转发)"></a>策略路由(策略转发)</h2><p>整个路由转发路径的路由不是静态的或者动态构建，而是通过策略构建的</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;路由策略&quot;&gt;&lt;a href=&quot;#路由策略&quot; class=&quot;headerlink&quot; title=&quot;路由策略&quot;&gt;&lt;/a&gt;路由策略&lt;/h1&gt;&lt;p&gt;路由器的规制&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;基于目的的，尽力而为的转发&lt;/li&gt;
&lt;li&gt;对数据&lt;code&gt;3层报头&lt;/code
      
    
    </summary>
    
    
      <category term="计算机网络" scheme="https://qiyuesanren.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
    
      <category term="路由策略" scheme="https://qiyuesanren.github.io/tags/%E8%B7%AF%E7%94%B1%E7%AD%96%E7%95%A5/"/>
    
  </entry>
  
  <entry>
    <title>Clion运行多个Main函数</title>
    <link href="https://qiyuesanren.github.io/2020/11/26/Clion%E8%BF%90%E8%A1%8C%E5%A4%9A%E4%B8%AAMain%20%E5%87%BD%E6%95%B0/"/>
    <id>https://qiyuesanren.github.io/2020/11/26/Clion运行多个Main 函数/</id>
    <published>2020-11-26T23:34:00.000Z</published>
    <updated>2020-11-26T08:53:59.945Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Clion运行多个main-函数"><a href="#Clion运行多个main-函数" class="headerlink" title="Clion运行多个main 函数"></a>Clion运行多个main 函数</h1><p>在Clion中每写完一个题目都得重新配置一边</p><img src="/2020/11/26/Clion运行多个Main%20函数/1.png" title="This is an example image"><p>太难了，于是我找方法找到了一个完美的解决方法</p><p>在<strong>CMakeLists.txt</strong>中修改</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required(VERSION 3.17)</span><br><span class="line">project(PAT)</span><br><span class="line"> </span><br><span class="line">set(CMAKE_CXX_STANDARD 14)</span><br><span class="line"></span><br><span class="line"># 上面呢不用修改，修改的在下面</span><br><span class="line"></span><br><span class="line">file (GLOB files *.cpp) # 遍历项目根目录下所有的 .cpp 文件</span><br><span class="line"></span><br><span class="line">foreach (file $&#123;files&#125;)</span><br><span class="line"> string(REGEX REPLACE &quot;.+/(.+)\\..*&quot; &quot;\\1&quot; exe $&#123;file&#125;)</span><br><span class="line"> add_executable ($&#123;exe&#125; $&#123;file&#125;)</span><br><span class="line"> message (\ \ \ \ --\ src/$&#123;exe&#125;.cpp\ will\ be\ compiled\ to\ bin/$&#123;exe&#125;)</span><br><span class="line">endforeach ()</span><br></pre></td></tr></table></figure><img src="/2020/11/26/Clion运行多个Main%20函数/2.png" title="This is an example image"><p>修改完之后需要重新加载CMake项目</p><img src="/2020/11/26/Clion运行多个Main%20函数/3.png" title="This is an example image"><p>运行</p><img src="/2020/11/26/Clion运行多个Main%20函数/4.png" title="This is an example image"><p>注意：<br>这种方法只能遍历根目录下的一层，如果根目录下还有文件夹，则里面的 cpp 文件没有被识别<br>就需要更改<code>file (GLOB files *.cpp)</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 如果你只需要根目录下的 test 文件夹的所有 .cpp 文件</span><br><span class="line">file (GLOB files test/*.cpp)</span><br><span class="line"></span><br><span class="line"># 如果你只有两层目录的话</span><br><span class="line">file (GLOB files *.cpp */*.cpp)</span><br><span class="line"></span><br><span class="line"># 同理，三层的话</span><br><span class="line">file (GLOB files *.cpp */*.cpp */*/*.cpp)</span><br><span class="line"> </span><br><span class="line"># 官方提供了一种递归的方法</span><br><span class="line"># 这样在运行框会多一个 CMakeCXXCompilerId，不过无伤大雅</span><br><span class="line">file (GLOB_RECURSE files *.cpp)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Clion运行多个main-函数&quot;&gt;&lt;a href=&quot;#Clion运行多个main-函数&quot; class=&quot;headerlink&quot; title=&quot;Clion运行多个main 函数&quot;&gt;&lt;/a&gt;Clion运行多个main 函数&lt;/h1&gt;&lt;p&gt;在Clion中每写完一个题目
      
    
    </summary>
    
    
    
      <category term="Clion" scheme="https://qiyuesanren.github.io/tags/Clion/"/>
    
  </entry>
  
  <entry>
    <title>OSPF实验搭建</title>
    <link href="https://qiyuesanren.github.io/2020/11/21/OSPF%E5%AE%9E%E9%AA%8C%E6%90%AD%E5%BB%BA/"/>
    <id>https://qiyuesanren.github.io/2020/11/21/OSPF实验搭建/</id>
    <published>2020-11-21T23:34:00.000Z</published>
    <updated>2020-11-27T13:15:28.283Z</updated>
    
    <content type="html"><![CDATA[<h1 id="OSPF实验搭建"><a href="#OSPF实验搭建" class="headerlink" title="OSPF实验搭建"></a>OSPF实验搭建</h1><img src="/2020/11/21/OSPF实验搭建/ospf1.png" title="This is an example image"><p><strong>RIP和末梢网络不在一起</strong></p><h2 id="配置IP-IP-环回地址"><a href="#配置IP-IP-环回地址" class="headerlink" title="配置IP(IP,环回地址)"></a>配置IP(IP,环回地址)</h2><h3 id="配置IP以R1为例子"><a href="#配置IP以R1为例子" class="headerlink" title="配置IP以R1为例子"></a>配置IP以R1为例子</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[R1]interface GigabitEthernet 0/0/0</span><br><span class="line">[R1-GigabitEthernet0/0/0]ip add</span><br><span class="line">[R1-GigabitEthernet0/0/0]ip address 192.168.1.2 24</span><br><span class="line">[R1-GigabitEthernet0/0/0]q</span><br></pre></td></tr></table></figure><h3 id="配置环回地址以R1为例子"><a href="#配置环回地址以R1为例子" class="headerlink" title="配置环回地址以R1为例子"></a>配置环回地址以R1为例子</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[R1]interface LoopBack 0</span><br><span class="line">[R1-LoopBack0]ip address 1.1.1.1 24</span><br><span class="line">[R1-LoopBack0]q</span><br></pre></td></tr></table></figure><h2 id="配置路由器"><a href="#配置路由器" class="headerlink" title="配置路由器"></a>配置路由器</h2><h3 id="以配置路由器-R1"><a href="#以配置路由器-R1" class="headerlink" title="以配置路由器(R1)"></a>以配置路由器(R1)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[R1]ospf</span><br><span class="line">[R1-ospf-1]area 0  //设置区域为0</span><br><span class="line">[R1-ospf-1-area-0.0.0.0]network 192.168.1.0 0.0.0.255  // 24为子网掩码  那么通配符掩码为 0.0.0.32-24=8=255</span><br><span class="line">[R1-ospf-1-area-0.0.0.0]network 1.1.1.0 0.0.0.255  // 24为子网掩码  那么通配符掩码为 0.0.0.32-24=8=255</span><br><span class="line">[R1-ospf-1-area-0.0.0.0]q</span><br><span class="line">[R1-ospf-1]q</span><br></pre></td></tr></table></figure><h3 id="配置R2的两个区域"><a href="#配置R2的两个区域" class="headerlink" title="配置R2的两个区域"></a>配置R2的两个区域</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">设置区域0</span><br><span class="line">[R2]ospf</span><br><span class="line">[R2-ospf-1]area 0</span><br><span class="line">[R2-ospf-1-area-0.0.0.0]network 192.168.1.0 0.0.0.255</span><br><span class="line">[R2-ospf-1-area-0.0.0.0]network 2.2.2.0 0.0.0.255</span><br><span class="line">设置区域1</span><br><span class="line">[R2-ospf-1]area 1</span><br><span class="line">[R2-ospf-1-area-0.0.0.1]network 192.168.2.0 0.0.0.255</span><br><span class="line">[R2-ospf-1-area-0.0.0.1]q</span><br></pre></td></tr></table></figure><h3 id="检查OPSF邻居状态"><a href="#检查OPSF邻居状态" class="headerlink" title="检查OPSF邻居状态"></a>检查OPSF邻居状态</h3><p>以R2为例<code>dispaly ospf peer</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Area 0.0.0.0 interface 192.168.1.2(GigabitEthernet0/0/0)&apos;s neighbors</span><br><span class="line">Router ID: 192.168.1.1      Address: 192.168.1.1     </span><br><span class="line">  State: Full  Mode:Nbr is  Slave  Priority: 1</span><br><span class="line">  DR: 192.168.1.1  BDR: 192.168.1.2  MTU: 0    </span><br><span class="line">  Dead timer due in 40  sec </span><br><span class="line">  Retrans timer interval: 0 </span><br><span class="line">  Neighbor is up for 00:06:07     </span><br><span class="line">  Authentication Sequence: [ 0 ] </span><br><span class="line">Router ID: 192.168.1.3      Address: 192.168.1.3     </span><br><span class="line">  State: Full  Mode:Nbr is  Master  Priority: 1</span><br><span class="line">  DR: 192.168.1.1  BDR: 192.168.1.2  MTU: 0    </span><br><span class="line">  Dead timer due in 40  sec </span><br><span class="line">  Retrans timer interval: 5 </span><br><span class="line">  Neighbor is up for 00:03:04     </span><br><span class="line">  Authentication Sequence: [ 0 ] </span><br><span class="line"> Neighbors </span><br><span class="line">Area 0.0.0.1 interface 192.168.2.2(GigabitEthernet0/0/1)&apos;s neighbors</span><br><span class="line">Router ID: 192.168.2.4      Address: 192.168.2.4     </span><br><span class="line">  State: Full  Mode:Nbr is  Master  Priority: 1</span><br><span class="line">  DR: 192.168.2.2  BDR: 192.168.2.4  MTU: 0    </span><br><span class="line">  Dead timer due in 30  sec </span><br><span class="line">  Retrans timer interval: 5 </span><br><span class="line">  Neighbor is up for 00:03:43     </span><br><span class="line">  Authentication Sequence: [ 0 ]</span><br></pre></td></tr></table></figure><h3 id="配置R3的Rip"><a href="#配置R3的Rip" class="headerlink" title="配置R3的Rip"></a>配置R3的Rip</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">先增加一个本地环回当RIP使用</span><br><span class="line">[R3]interface LoopBack 1</span><br><span class="line">[R3-LoopBack1]ip address 192.168.3.1 255.255.255.0   添加一个ip</span><br><span class="line">[R3-LoopBack1]q</span><br></pre></td></tr></table></figure><h3 id="添加RIP协议"><a href="#添加RIP协议" class="headerlink" title="添加RIP协议"></a>添加RIP协议</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[R3]rip</span><br><span class="line">[R3-rip-1]undo summary </span><br><span class="line">[R3-rip-1]version 2</span><br><span class="line">[R3-rip-1]network 192.168.3.3</span><br><span class="line">[R3-rip-1]q</span><br></pre></td></tr></table></figure><h3 id="删除RIP协议"><a href="#删除RIP协议" class="headerlink" title="删除RIP协议"></a>删除RIP协议</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[R3]undo rip 1</span><br><span class="line">Warning: The RIP process will be deleted. Continue?[Y/N]y</span><br></pre></td></tr></table></figure><h3 id="将RIP协议注入到OSPF中"><a href="#将RIP协议注入到OSPF中" class="headerlink" title="将RIP协议注入到OSPF中"></a>将RIP协议注入到OSPF中</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[R3]ospf</span><br><span class="line">[R3-ospf-1]import-route rip</span><br></pre></td></tr></table></figure><h3 id="删除rip注入"><a href="#删除rip注入" class="headerlink" title="删除rip注入"></a>删除rip注入</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[R3]ospf</span><br><span class="line">[R3-ospf-1]undo import-route rip</span><br></pre></td></tr></table></figure><h2 id="查询路由表"><a href="#查询路由表" class="headerlink" title="查询路由表"></a>查询路由表</h2><p>在R4中<code>dispaly ip routing-table</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[R4]display ip routing-table </span><br><span class="line">Route Flags: R - relay, D - download to fib</span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line">Routing Tables: Public</span><br><span class="line">         Destinations : 15       Routes : 15       </span><br><span class="line">Destination/Mask    Proto   Pre  Cost      Flags NextHop         Interface</span><br><span class="line">1.1.1.1/32  OSPF    10   2           D   192.168.2.2     GigabitEthernet0/0/0</span><br><span class="line">2.2.2.2/32  OSPF    10   1           D   192.168.2.2     GigabitEthernet0/0/0</span><br><span class="line">3.3.3.3/32  OSPF    10   2           D   192.168.2.2     GigabitEthernet0/0/0</span><br><span class="line">4.4.4.0/24  Direct  0    0           D   4.4.4.4         LoopBack0</span><br><span class="line">4.4.4.4/32  Direct  0    0           D   127.0.0.1       LoopBack0</span><br><span class="line">4.4.4.255/32  Direct  0    0           D   127.0.0.1       LoopBack0</span><br><span class="line">127.0.0.0/8   Direct  0    0           D   127.0.0.1       InLoopBack0</span><br><span class="line">127.0.0.1/32  Direct  0    0           D   127.0.0.1       InLoopBack0</span><br><span class="line">127.255.255.255/32  Direct  0    0           D   127.0.0.1       InLoopBack0</span><br><span class="line">192.168.1.0/24  OSPF    10   2           D   192.168.2.2     GigabitEthernet0/0/0</span><br><span class="line">192.168.2.0/24  Direct  0    0           D   192.168.2.4     GigabitEthernet0/0/0</span><br><span class="line">192.168.2.4/32  Direct  0    0           D   127.0.0.1       GigabitEthernet0/0/0</span><br><span class="line">192.168.2.255/32  Direct  0    0           D   127.0.0.1       GigabitEthernet0/0/0</span><br><span class="line">192.168.3.0/24  O_ASE   150  1           D   192.168.2.2     GigabitEthernet0/0/0</span><br><span class="line">255.255.255.255/32  Direct  0    0           D   127.0.0.1       InLoopBack0</span><br></pre></td></tr></table></figure><p>可以看见192.168.3.0 网络已经OK了，O_ASE(外部区域网络)</p><h1 id="问题分析-STUB区域搭建"><a href="#问题分析-STUB区域搭建" class="headerlink" title="问题分析(STUB区域搭建)"></a>问题分析(STUB区域搭建)</h1><p>R4中<code>display ospf lsdb</code> 查看数据链路情况</p><p><strong>问题:R4中有许多，无用的信息</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;R4&gt;display ospf lsdb</span><br><span class="line"> OSPF Process 1 with Router ID 192.168.2.4</span><br><span class="line"> Link State Database </span><br><span class="line">         Area: 0.0.0.1</span><br><span class="line"> Type      LinkState ID    AdvRouter          Age  Len   Sequence   Metric</span><br><span class="line"> Router    192.168.2.4     192.168.2.4        905  48    80000004       1</span><br><span class="line"> Router    192.168.1.2     192.168.1.2        908  36    80000005       1</span><br><span class="line"> Network   192.168.2.2     192.168.1.2        908  32    80000002       0</span><br><span class="line"> Sum-Net   3.3.3.3         192.168.1.2        864  28    80000001       1</span><br><span class="line"> Sum-Net   2.2.2.2         192.168.1.2       1022  28    80000001       0</span><br><span class="line"> Sum-Net   1.1.1.1         192.168.1.2       1022  28    80000001       1</span><br><span class="line"> Sum-Net   192.168.1.0     192.168.1.2       1022  28    80000001       1</span><br><span class="line"> Sum-Asbr  192.168.1.3     192.168.1.2        819  28    80000001       1</span><br><span class="line"> AS External Database</span><br><span class="line"> Type      LinkState ID    AdvRouter          Age  Len   Sequence   Metric</span><br><span class="line"> External  192.168.3.0     192.168.1.3        493  36    80000001       1</span><br></pre></td></tr></table></figure><h2 id="STUB"><a href="#STUB" class="headerlink" title="STUB"></a>STUB</h2><p>在area 1 区域所有设备都设置STUB</p><h3 id="设置STUB"><a href="#设置STUB" class="headerlink" title="设置STUB"></a>设置STUB</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[R4]ospf</span><br><span class="line">[R4-ospf-1]area 1</span><br><span class="line">[R4-ospf-1-area-0.0.0.1]stub</span><br></pre></td></tr></table></figure><h3 id="删除STUB区域"><a href="#删除STUB区域" class="headerlink" title="删除STUB区域"></a>删除STUB区域</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[R4]ospf</span><br><span class="line">[R4-ospf-1]area 1</span><br><span class="line">[R4-ospf-1-area-0.0.0.1]undo stub</span><br></pre></td></tr></table></figure><p><strong>查看数据链路情况</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[R4]display ospf lsdb</span><br><span class="line"> OSPF Process 1 with Router ID 192.168.2.4</span><br><span class="line"> Link State Database </span><br><span class="line">         Area: 0.0.0.1</span><br><span class="line"> Type      LinkState ID    AdvRouter          Age  Len   Sequence   Metric</span><br><span class="line"> Router    192.168.2.4     192.168.2.4         21  48    80000005       1</span><br><span class="line"> Router    192.168.1.2     192.168.1.2         22  36    80000004       1</span><br><span class="line"> Network   192.168.2.4     192.168.2.4         21  32    80000001       0</span><br><span class="line"> Sum-Net   0.0.0.0         192.168.1.2         61  28    80000001       1</span><br><span class="line"> Sum-Net   3.3.3.3         192.168.1.2         61  28    80000001       1</span><br><span class="line"> Sum-Net   2.2.2.2         192.168.1.2         61  28    80000001       0</span><br><span class="line"> Sum-Net   1.1.1.1         192.168.1.2         61  28    80000001       1</span><br><span class="line"> Sum-Net   192.168.1.0     192.168.1.2         61  28    80000001       1</span><br></pre></td></tr></table></figure><p><strong>多了一条三类0.0.0.0的缺省，访问数据，给到R2</strong></p><h2 id="完全STUB"><a href="#完全STUB" class="headerlink" title="完全STUB"></a>完全STUB</h2><p>注意先是STUB才能升级完全STUB，不能一步到位</p><p>在area 1 区域中ABR设备上(R2)设置完全STUB</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[R2]ospf</span><br><span class="line">[R2-ospf-1]area 1</span><br><span class="line">[R2-ospf-1-area-0.0.0.1]stub no-summary</span><br></pre></td></tr></table></figure><p><strong>查看R4数据链路情况</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;R4&gt;display ospf lsdb</span><br><span class="line"> OSPF Process 1 with Router ID 192.168.2.4</span><br><span class="line"> Link State Database </span><br><span class="line">         Area: 0.0.0.1</span><br><span class="line"> Type      LinkState ID    AdvRouter          Age  Len   Sequence   Metric</span><br><span class="line"> Router    192.168.2.4     192.168.2.4         54  48    8000000A       1</span><br><span class="line"> Router    192.168.1.2     192.168.1.2         60  36    80000005       1</span><br><span class="line"> Network   192.168.2.4     192.168.2.4         54  32    80000002       0</span><br><span class="line"> Sum-Net   0.0.0.0         192.168.1.2        370  28    80000001       1</span><br></pre></td></tr></table></figure><h3 id="如果删除完全STUB，只用删除STUB就好了"><a href="#如果删除完全STUB，只用删除STUB就好了" class="headerlink" title="如果删除完全STUB，只用删除STUB就好了"></a>如果删除完全STUB，只用删除STUB就好了</h3><h1 id="边界路由上含有RIP协议"><a href="#边界路由上含有RIP协议" class="headerlink" title="边界路由上含有RIP协议"></a>边界路由上含有RIP协议</h1><p><strong>使用NSSA区域</strong></p><img src="/2020/11/21/OSPF实验搭建/ospf2.png" title="This is an example image"><p>如果AREA1区域还是完全STUB，R1就不可能学到RIP</p><h2 id="设置NSSA区域"><a href="#设置NSSA区域" class="headerlink" title="设置NSSA区域"></a>设置NSSA区域</h2><p><strong>在area 1 区域所有设备都设置NSSA</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[R4]ospf</span><br><span class="line">[R4-ospf-1]area 1</span><br><span class="line">[R4-ospf-1-area-0.0.0.1]nssa</span><br></pre></td></tr></table></figure><p>删除NSSA区域</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[R4]ospf</span><br><span class="line">[R4-ospf-1]area 1</span><br><span class="line">[R4-ospf-1-area-0.0.0.1]undo nssa</span><br></pre></td></tr></table></figure><p><strong>查看链路状态</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[R4]display ospf lsdb</span><br><span class="line"> OSPF Process 1 with Router ID 192.168.2.4</span><br><span class="line"> Link State Database </span><br><span class="line">         Area: 0.0.0.1</span><br><span class="line"> Type      LinkState ID    AdvRouter          Age  Len   Sequence   Metric</span><br><span class="line"> Router    192.168.2.4     192.168.2.4         93  48    80000006       1</span><br><span class="line"> Router    192.168.1.2     192.168.1.2        102  36    80000003       1</span><br><span class="line"> Network   192.168.2.4     192.168.2.4         93  32    80000002       0</span><br><span class="line"> Sum-Net   3.3.3.3         192.168.1.2        103  28    80000001       1</span><br><span class="line"> Sum-Net   2.2.2.2         192.168.1.2        103  28    80000001       0</span><br><span class="line"> Sum-Net   1.1.1.1         192.168.1.2        103  28    80000001       1</span><br><span class="line"> Sum-Net   192.168.1.0     192.168.1.2        103  28    80000001       1</span><br><span class="line"> NSSA      192.168.4.0     192.168.2.4        214  36    80000001       1</span><br><span class="line"> NSSA      0.0.0.0         192.168.1.2        103  36</span><br></pre></td></tr></table></figure><h2 id="设置完全NSSA区域"><a href="#设置完全NSSA区域" class="headerlink" title="设置完全NSSA区域"></a>设置完全NSSA区域</h2><p>注意先是nssa才能升级完全nssa，不能一步到位</p><p>如果删除完全NSSA，只用删除NSSA就好了</p><p>在area 1 区域中ABR设备上(R2)设置完全nasa</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[R2-ospf-1-area-0.0.0.1]nssa no-summary</span><br></pre></td></tr></table></figure><p><strong>查看链路状态</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[R4]display ospf lsdb</span><br><span class="line"> OSPF Process 1 with Router ID 192.168.2.4</span><br><span class="line"> Link State Database </span><br><span class="line">         Area: 0.0.0.1</span><br><span class="line"> Type      LinkState ID    AdvRouter          Age  Len   Sequence   Metric</span><br><span class="line"> Router    192.168.2.4     192.168.2.4         16  48    8000000B       1</span><br><span class="line"> Router    192.168.1.2     192.168.1.2         17  36    80000004       1</span><br><span class="line"> Network   192.168.2.4     192.168.2.4         16  32    80000003       0</span><br><span class="line"> Sum-Net   0.0.0.0         192.168.1.2         28  28    80000001       1</span><br><span class="line"> NSSA      192.168.4.0     192.168.2.4        414  36    80000001       1</span><br><span class="line"> NSSA      0.0.0.0         192.168.1.2        303  36    80000001       1</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;OSPF实验搭建&quot;&gt;&lt;a href=&quot;#OSPF实验搭建&quot; class=&quot;headerlink&quot; title=&quot;OSPF实验搭建&quot;&gt;&lt;/a&gt;OSPF实验搭建&lt;/h1&gt;&lt;img src=&quot;/2020/11/21/OSPF实验搭建/ospf1.png&quot; title=&quot;
      
    
    </summary>
    
    
      <category term="计算机网络" scheme="https://qiyuesanren.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
    
      <category term="OSPF" scheme="https://qiyuesanren.github.io/tags/OSPF/"/>
    
  </entry>
  
  <entry>
    <title>OSPF</title>
    <link href="https://qiyuesanren.github.io/2020/11/18/OSPF/"/>
    <id>https://qiyuesanren.github.io/2020/11/18/OSPF/</id>
    <published>2020-11-18T19:00:57.000Z</published>
    <updated>2020-11-18T09:32:59.748Z</updated>
    
    <content type="html"><![CDATA[<h1 id="OSPF"><a href="#OSPF" class="headerlink" title="OSPF"></a>OSPF</h1><h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><p><strong>介绍：</strong></p><ul><li>IETF针对中大型网络开发设计的一个动态路由选择协议</li><li>开放式最短路线优先</li><li>V1 –&gt;(实验室版本)</li><li>V2 –&gt;(IPV4)</li><li>V3 –&gt;(IPV6)</li></ul><p><strong>特点：</strong></p><ul><li>算法：SPF  –&gt;（Dijkstra）算法</li></ul><p><strong>更新：</strong></p><ul><li><strong>LSA</strong>链路状态通告(<strong>摘要更新</strong>)  构建网络大体结构</li><li><strong>LSA</strong> 30分钟 洪范一次  更新采用触发更新</li></ul><p><strong>区域：</strong></p><ul><li>区域(自行规划，每个区域的LSA只会在本区域洪范)：核心区域(0.0.0.0不是IP只是一个标识) +非核心区域(X.X.X.X)</li><li>非核心区域必须和核心区域链接</li></ul><p><strong>路由器身份：</strong></p><ul><li>IR (内部路由器)：所有接口网段属于同一区域</li><li>ABR (区域边界路由器)：接口的网段属于不同区域</li><li>ASBR  (自治系统边界路由器)：接口网段属于不同协议</li></ul><p><strong>特点：</strong></p><ul><li>支持VLSM和CIDR(无类别域间路)</li><li>支持路由认证</li><li>组播更新：224.0.0.5 224.0.0.6</li><li>OSPF 有一套自己的可保证性保障机制，使用IP封装，协议编号89</li><li>Route-ID –&gt; 唯一的身份标识 <ul><li>华为设备：第一个配置的有效接口地址作为身份标识</li><li>思科设备：最大的环回接口地址或最大的物理接口地址</li><li>人工的配置</li></ul></li></ul><p><strong>邻居处理：</strong></p><p> <strong>自己有可靠性保障机制 所以报文直接用IP封装</strong></p><ul><li><strong>报文–&gt;邻居状态过度</strong>    <ul><li>Hello 用于建立邻居关系</li><li>DBD 包含了LSA</li><li>LSR：用于查询详细网段路由信息</li><li>LSU：详细网段的路由信息</li><li>LSAck：确认报文</li></ul></li><li><strong>交互步骤(邻居有限状态机)</strong><ul><li>down   设备没有任何动作</li><li>init    设备发送hello 报文</li><li>2-way  发送了Hello 也接受了hello ，并且hello报文中的参数匹配</li><li>exstart   邻居间发送Route-ID比较  决定哪一方先发送DBD  (链路状态构造)</li><li>exchange  发送DBD 并接受DBD构建网络拓扑结构</li><li>loading 查询具体网络信息</li><li>full(完整) 正常转发 </li></ul></li><li><strong>Hello 决定性参数</strong><ul><li>发送Hello 报文接口所属区域ID</li><li>接口所属网段信息</li><li>接口设置Hello 发送间隔和死亡时间(如果双方更改时间不一样，可能会出问题)</li><li>接口是否设置认证</li><li>接口是否属于特殊区域标记</li><li>接口的MTU(最大传输单元)值： 邻居可以正常建立但是无法交互DBD报文<h2 id="OSPF认证"><a href="#OSPF认证" class="headerlink" title="OSPF认证"></a>OSPF认证</h2></li></ul></li></ul><p><strong>加密</strong>：用来保证数据传输的安全，解决私密性</p><p><strong>认证：</strong>1.验证双方身份的合法性，2.数据的完整性(内容没有被串改)</p><p><strong>认证方式：</strong>链路认证+区域认证</p><h2 id="DR-BDR问题"><a href="#DR-BDR问题" class="headerlink" title="DR/BDR问题"></a>DR/BDR问题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DR（Designated Router）：指定路由器，OSPF协议启动后开始选举而来</span><br><span class="line"></span><br><span class="line">BDR（Back-up Designated Router）：备份指定路由器，同样是由OSPF启动后选举而来</span><br><span class="line"></span><br><span class="line">DRothers：其他路由器，非DR非BDR的路由器都是DRothers。</span><br><span class="line"></span><br><span class="line">ABR（Area Border Routers：区域边界路由器，连接不同OSPF区域。</span><br><span class="line"></span><br><span class="line">ASBR（Autonomous System Boundary Router）：自治系统边界路由器，位于OSPF和非OSPF网络之间。</span><br><span class="line"></span><br><span class="line">骨干路由器：至少有一个借口连接到骨干区域（区域0）</span><br></pre></td></tr></table></figure><p><strong>选举BR和DBR</strong></p><ul><li>所有设备都会申明自己是BDR，当选举结束后，没有DR，当前BDR会成为DR。</li><li>比较接口优先级(0-255 默认为1)，越大表示越优先，如果为0，则不掺假选举。</li><li>比较Router-ID 数字越大，优先级越高。</li></ul><p><strong>注意</strong>：OSPF选举是非抢占性的(只要BR选出来了，如果来了优先级更高的路由器，不会让新来的路由器成为DR)，如果要人工干预OSPF选举(改接口优先级)，需要重启DR，BDR设备的OSPF进程。</p><p><strong>组播地址</strong></p><ul><li>224.0.0.6 (组播地址), DR/BDR使用，确保数据交互，存活状态检查。</li></ul><h2 id="LSA链路状态通告"><a href="#LSA链路状态通告" class="headerlink" title="LSA链路状态通告"></a>LSA链路状态通告</h2><p>包含着DBD报文中</p><p>常用通告，1，2，3，4，5，7类LSA。</p><p><strong>1类LSA</strong>：每台设备都会产生，包含本地链路状态摘要，只在<strong>同区域内扩散。</strong></p><img src="/2020/11/18/OSPF/1类LSA.png" title="This is an example image"><p><strong>2类LAS：</strong>DR产生，用于向其他非DR/BDR设备宣告自己位置，只在<strong>同区域内扩散</strong>，通过DR相互中转。</p><img src="/2020/11/18/OSPF/2类LSA.png" title="This is an example image"><p><strong>3类LAS：</strong>ABR产生，用户向本区域宣告非本区域网络摘要信息(1类LSA通过ABR变3LSA)。</p><img src="/2020/11/18/OSPF/3类LSA.png" title="This is an example image"><p><strong>4类LAS：</strong>ABR产生，用于向本区域宣告ASBR<strong>位置。</strong></p><img src="/2020/11/18/OSPF/4类LSA.png" title="This is an example image"><p><strong>5类LAS：</strong>ASBR产生，ASBR用于向OSPF网络宣告外部网络信息，<strong>ASBR把RIP信息变成5类发到OSPF</strong>。</p><img src="/2020/11/18/OSPF/5类LSA.png" title="This is an example image"><h2 id="特殊区域"><a href="#特殊区域" class="headerlink" title="特殊区域"></a>特殊区域</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">STUB：末梢区域</span><br><span class="line">完全STUB：Totaly STUB</span><br><span class="line">非完全STUB：NSSA</span><br><span class="line">完全非完全STUB：Totaly NSSA</span><br><span class="line"></span><br><span class="line">所有特殊区域只能够对非核心区域设置</span><br><span class="line"></span><br><span class="line">注意：不是所有STUB都支持完全STUB，但都支持STUB</span><br><span class="line"></span><br><span class="line">通过看是不是外部网络(与外部区域相连)的注入来确定STUB，还是非完全STUB</span><br><span class="line"></span><br><span class="line">如果属于特殊区域，设备建临，对接口发送的HELLO报文进行特殊区域标记，改完特殊区域后，会对重新进行邻居建立</span><br></pre></td></tr></table></figure><img src="/2020/11/18/OSPF/特殊区域.png" title="This is an example image"><p>A1区域通过4类，5类(麻烦了)去了解RIP，所以把A1区域作为STUB区域。</p><p><strong>STUB(末梢区域):</strong>当一个非核心区域被设置成为STUB区域，那么连接该区域的ABR设备就不会向该区域发送4类(LSA)，5类(LSA)而是发一条缺省3类LSA，但是还是有A0还会向A1发送3类(没用)。</p><p><strong>完全STUB区域(Totaly STUB)</strong>：当一个非核心区域被设置成为完全STUB后，该区域的ABR不会再向该区域发送3、4、5类LSA，而是改发一条缺省3类LSA。</p><p><strong>完全STUB区域的问题</strong>：**如果一个非核心区域是外部网络的注入区域，那么STUB后，4、5类LSA就会被抑制，本区域不会受到影响，但是OSPF其他区域就无法正常学习到外部网络信息。</p><p><strong>非完全STUB</strong>：当一个非核心区域被设置成为非完全STUB后，该区域的4、5类会被抑制，变成一条缺省3类，那么，5类会转变为7类LSA，通过ABR向其他区域发送。</p><p><strong>完全非完全STUB</strong>：当一个非核心区域被设置成为完全非完全STUB后，该区域的3、4、5类会被抑制，变成一条缺省3类，5类会转变为7类LSA，通过ABR向其他区域发送。</p><h2 id="虚拟连接"><a href="#虚拟连接" class="headerlink" title="虚拟连接"></a>虚拟连接</h2><p>因为OSPF要求非核心区域必须和核心区域链接，但是有时因为某些情况会导致非核心无法和核心直连，或者核心区区域不连续，ABR设备就可以通过逻辑虚连接来保证要求 。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;OSPF&quot;&gt;&lt;a href=&quot;#OSPF&quot; class=&quot;headerlink&quot; title=&quot;OSPF&quot;&gt;&lt;/a&gt;OSPF&lt;/h1&gt;&lt;h2 id=&quot;基础&quot;&gt;&lt;a href=&quot;#基础&quot; class=&quot;headerlink&quot; title=&quot;基础&quot;&gt;&lt;/a&gt;基础&lt;/h
      
    
    </summary>
    
    
      <category term="计算机网络" scheme="https://qiyuesanren.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
    
      <category term="OSPF" scheme="https://qiyuesanren.github.io/tags/OSPF/"/>
    
  </entry>
  
  <entry>
    <title>RIP实验搭建</title>
    <link href="https://qiyuesanren.github.io/2020/11/15/RIP%E6%90%AD%E5%BB%BA/"/>
    <id>https://qiyuesanren.github.io/2020/11/15/RIP搭建/</id>
    <published>2020-11-16T06:54:57.000Z</published>
    <updated>2020-11-27T13:15:27.299Z</updated>
    
    <content type="html"><![CDATA[<h1 id="RIP"><a href="#RIP" class="headerlink" title="RIP"></a>RIP</h1><p>实验环境：ENSP</p><img src="/2020/11/15/RIP搭建/rip1.png" title="This is an example image"><h2 id="配置IP-IP-网关"><a href="#配置IP-IP-网关" class="headerlink" title="配置IP(IP,网关)"></a>配置IP(IP,网关)</h2><h3 id="配置PC-以PC1为例子"><a href="#配置PC-以PC1为例子" class="headerlink" title="配置PC(以PC1为例子)"></a>配置PC(以PC1为例子)</h3><p>机器的IP地址= 网段为192.168.1.0+机器编号为1=192.168.1.1</p><p>网关=网段192.168.1.0+254=192.168.1.254</p><img src="/2020/11/15/RIP搭建/rip2.png" title="This is an example image"><h3 id="配置路由器-以AR1为例"><a href="#配置路由器-以AR1为例" class="headerlink" title="配置路由器(以AR1为例)"></a>配置路由器(以AR1为例)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;system-view  //切换系统视图</span><br><span class="line">[Huawei]interface GigabitEthernet 0/0/0  //设置0/0/0端口</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]ip address 192.168.1.254 24  //因为网段为192.168.1.0，而且直接与电脑相连接，所以设置IP为192.168.1.254，24为子网掩码</span><br><span class="line">[Huawei-GigabitEthernet0/0/0]q  //退出0/0/0 端口</span><br><span class="line">[Huawei]interface GigabitEthernet 0/0/1  //设置0/0/1端口</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]ip address 172.16.1.1 16  //因为网段为172.16.1.0 16 设备编号为1，所以设置IP为172.16.1.1，16为子网掩码</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]q  //退出0/0/0 端口</span><br><span class="line">//到这里为止IP就算是配置好了</span><br><span class="line">[Huawei]display current-configuration   //查看路由器配置信息</span><br><span class="line">注意：如果端口的ip配错了，直接进入端口重新设置一边ip就好了，因为一个端口只能有一个IP</span><br></pre></td></tr></table></figure><h2 id="配置路由器协议"><a href="#配置路由器协议" class="headerlink" title="配置路由器协议"></a>配置路由器协议</h2><p>配置RIP协议，以AR1为例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]rip</span><br><span class="line">[Huawei-rip-1]undo summary  //关闭自动汇总</span><br><span class="line">[Huawei-rip-1]version 2  //选择版本V2</span><br><span class="line">[Huawei-rip-1]network 172.16.0.0  </span><br><span class="line">[Huawei-rip-1]network 192.168.1.0  </span><br><span class="line">[Huawei-rip-1]q</span><br><span class="line"></span><br><span class="line">关于network</span><br><span class="line"></span><br><span class="line">A类IP段：0.0.0.0 到 127.255.255.255.</span><br><span class="line">A类 网段都是x.0.0.0</span><br><span class="line"></span><br><span class="line">B类IP段：128.0.0.0 到 191.255.255.255.</span><br><span class="line">B类 网段都是x.x.0.0</span><br><span class="line"></span><br><span class="line">C类IP段：192.0.0.0 到 223.255.255.255.</span><br><span class="line">C类 网段都是x.x.x.0</span><br></pre></td></tr></table></figure><p>如果网段配错了：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]rip</span><br><span class="line">[Huawei-rip-1]display this</span><br><span class="line">[V200R003C00]</span><br><span class="line">#</span><br><span class="line">rip 1</span><br><span class="line"> undo summary</span><br><span class="line"> version 2</span><br><span class="line"> network 172.16.0.0</span><br><span class="line"> network 1.0.0.0</span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line">[Huawei-rip-1]undo network 172.16.0.0  //删除网段</span><br><span class="line">[Huawei-rip-1]display this  //查看RIP-1的网段信息</span><br><span class="line">[V200R003C00]</span><br><span class="line">#</span><br><span class="line">rip 1</span><br><span class="line"> undo summary</span><br><span class="line"> version 2</span><br><span class="line"> network 1.0.0.0</span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line">//然后再重新添加</span><br></pre></td></tr></table></figure><p>删除RIP协议</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]rip   //查看编号</span><br><span class="line">[Huawei-rip-1]q  // 显示编号为RIP-1</span><br><span class="line">[Huawei]undo rip 1  //删除RIP-1 </span><br><span class="line">Warning: The RIP process will be deleted. Continue?[Y/N]y  输入Y</span><br></pre></td></tr></table></figure><h2 id="查询路由表"><a href="#查询路由表" class="headerlink" title="查询路由表"></a>查询路由表</h2><p><code>display ip routing-table</code>查询路由表信息</p><p>以R2为例</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]display ip routing-table </span><br><span class="line">Route Flags: R - relay, D - download to fib</span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line">Routing Tables: Public</span><br><span class="line">         Destinations : 13       Routes : 13         </span><br><span class="line">Destination/Mask    Proto   Pre  Cost      Flags NextHop         Interface</span><br><span class="line">1.0.0.0/8   Direct  0    0           D   1.1.1.2         GigabitEthernet0/0/1</span><br><span class="line">1.1.1.2/32  Direct  0    0           D   127.0.0.1       GigabitEthernet0/0/1</span><br><span class="line">1.255.255.255/32  Direct  0    0           D   127.0.0.1       GigabitEthernet0/0/1</span><br><span class="line">127.0.0.0/8   Direct  0    0           D   127.0.0.1       InLoopBack0</span><br><span class="line">127.0.0.1/32  Direct  0    0           D   127.0.0.1       InLoopBack0</span><br><span class="line">127.255.255.255/32  Direct  0    0           D   127.0.0.1       InLoopBack0</span><br><span class="line">172.15.0.0/16  RIP     100  1           D   1.1.1.3         GigabitEthernet0/0/1</span><br><span class="line">172.16.0.0/16  Direct  0    0           D   172.16.1.2      GigabitEthernet0/0/0</span><br><span class="line">172.16.1.2/32  Direct  0    0           D   127.0.0.1       GigabitEthernet0/0/0</span><br><span class="line">172.16.255.255/32  Direct  0    0           D   127.0.0.1       GigabitEthernet0/0/0</span><br><span class="line">192.168.1.0/24  RIP     100  1           D   172.16.1.1      GigabitEthernet0/0/0</span><br><span class="line">192.168.2.0/24  RIP     100  2           D   1.1.1.3         GigabitEthernet0/0/1</span><br><span class="line">255.255.255.255/32  Direct  0    0           D   127.0.0.1       InLoopBack0</span><br><span class="line"></span><br><span class="line">Destination/Mask(网段信息)</span><br><span class="line">Proto(连接方式)</span><br></pre></td></tr></table></figure><h2 id="测试-ping"><a href="#测试-ping" class="headerlink" title="测试(ping)"></a>测试(ping)</h2><img src="/2020/11/15/RIP搭建/rip3.png" title="This is an example image">]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;RIP&quot;&gt;&lt;a href=&quot;#RIP&quot; class=&quot;headerlink&quot; title=&quot;RIP&quot;&gt;&lt;/a&gt;RIP&lt;/h1&gt;&lt;p&gt;实验环境：ENSP&lt;/p&gt;
&lt;img src=&quot;/2020/11/15/RIP搭建/rip1.png&quot; title=&quot;This is
      
    
    </summary>
    
    
      <category term="计算机网络" scheme="https://qiyuesanren.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
    
      <category term="RIP" scheme="https://qiyuesanren.github.io/tags/RIP/"/>
    
  </entry>
  
  <entry>
    <title>动态路由协议的原理+RIP</title>
    <link href="https://qiyuesanren.github.io/2020/11/13/%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%8E%9F%E7%90%86+RIP/"/>
    <id>https://qiyuesanren.github.io/2020/11/13/动态路由协议的原理+RIP/</id>
    <published>2020-11-13T17:54:57.000Z</published>
    <updated>2020-11-18T09:29:54.491Z</updated>
    
    <content type="html"><![CDATA[<h3 id="动态路由协议的原理-RIP"><a href="#动态路由协议的原理-RIP" class="headerlink" title="动态路由协议的原理+RIP"></a>动态路由协议的原理+RIP</h3><h2 id="路由协议"><a href="#路由协议" class="headerlink" title="路由协议"></a>路由协议</h2><p>网络层</p><p><strong>路由</strong>：指导数据包转发的路径</p><p><strong>路由表的构建(获得)方式</strong></p><ul><li>直连路由：路由器直接连接的网络的路由</li><li>静态路由：网络管理员通过人工设置构建(配置)的路由<ul><li>优点：安全，没有设备计算设备占用</li><li>缺点：需要管理员熟悉网络结构，针对于大型网络—-&gt;配置复杂，工作量大，不灵活,发生变动需要调整</li></ul></li><li>动态路由：路由器通过运行<strong>动态路由选择协议</strong>学习到的路由<ul><li>范围划分</li><li>IGP 内部网关协议—-&gt;RIP(距离矢量算法),OSPF(最短路径优先),IS-IS(中间系统到中间系统),EIGRP(思科)</li><li>EGP 外部网关协议—-&gt;BGP(边界网关协议)</li><li>AS：自治系统—-&gt;一个网络受同意组织管理和维护(大公司，运营商)—-&gt;自治系统受到国际性组织认可会<strong>颁发一个全球的唯一自治性编号</strong></li><li><img src="/2020/11/13/动态路由协议的原理+RIP/图1.png" title="This is an example image"></li></ul></li></ul><p><strong>不同的路由协议</strong>学习到相同的目的网络</p><ul><li><strong>优先级/管理距离</strong>：当不同的路由协议学习到相同的目的网络，通过优先级\管理距离来区分路由的好坏</li><li>华为设备：直连 0 OSPF 10 IS-IS 15 静态60 RIP 100 BGP 255 —-&gt;(数字越低越好)</li><li><strong>度量值(cost)</strong>：<strong>同一种协议</strong>学习到相同的目的网络，通过<strong>度量值</strong>区分路由和的好坏<ul><li>距离矢量：通过目的地址的网络与本地的远近(需要经过多少台路由器)</li><li>链路状态：通过带宽进行计算</li><li>路径：加入人工指定的参数，通过某种规则，比较人工指定的参数，进行选择</li></ul></li></ul><h2 id="动态路由原理"><a href="#动态路由原理" class="headerlink" title="动态路由原理"></a>动态路由原理</h2><img src="/2020/11/13/动态路由协议的原理+RIP/图2.png" title="This is an example image"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">图中四个网段(横线，1.0 2.0 3.0 4.0)</span><br><span class="line"></span><br><span class="line">第一个路由器知道直连网络1.0和2.0</span><br><span class="line">第二个路由器知道直连网络2.0和3.0</span><br><span class="line">第三个路由器知道直连网络3.0和4.0</span><br></pre></td></tr></table></figure><p><strong>直连网络</strong> —-&gt;1.0想去4.0—-&gt;路由器只知道1.0和2.0，就会把数据丢弃掉</p><p><strong>静态路由</strong> —-&gt;1.0想去4.0—-&gt;数据从哪发出去，扔到那，都已经被指定好了</p><p><strong>动态路由</strong> —-&gt;(距离矢量)—-&gt;</p><img src="/2020/11/13/动态路由协议的原理+RIP/图3.png" title="This is an example image"><p>更新数据包：本地路由信息，用于让其他设备学习 </p><img src="/2020/11/13/动态路由协议的原理+RIP/图4.png" title="This is an example image"><p>收敛完成：所有路由器通过学习构建整网的网段信息，可以进行数据转发</p><p><strong>动态路由的好坏</strong>：收敛完成的速度</p><p><strong>更新方式</strong></p><ul><li>周期性更新<ul><li>如果，一个路由出问题，陷入<strong>路由环路</strong>(两台路由器都错误的认为对方是自己去往的下一台设备)</li><li><img src="/2020/11/13/动态路由协议的原理+RIP/图2.png" title="This is an example image"></li><li>解决办法<ul><li><strong>水平分割</strong>：从一个接口收到收到的跟新不会再从这个接口发出</li><li><strong>老化</strong>：路由器没学到一条路由器都会进行老化计时，如果时间到达老化时间同时仍没有收到更新那么则认为这条路由出现故障</li><li><strong>毒性逆转</strong>：从一个接口收到的路由仍会从该接口发回，但是发回时，度量值会标记为无穷大(及不可达)</li><li><strong>最大条数限制</strong>：会限制更新数据包的转发次数</li></ul></li></ul></li><li>触发更新 ：收敛完成之后，只有那个网络出现问题，才会针对出现问题的网络，然后通知别人，不要相信他</li></ul><h2 id="RIP协议-中小型网络"><a href="#RIP协议-中小型网络" class="headerlink" title="RIP协议(中小型网络)"></a>RIP协议(中小型网络)</h2><p><strong>度量值(cost)：</strong>距离矢量  根据<strong>更新包</strong>( 封装在UDP使用端口520)的<strong>跳数</strong>(最大跳数15 ，16即是不可达)</p><p><strong>版本</strong></p><ul><li>V1  有类网络<ul><li>更新发送的地址 255.255.255.255 (<strong>广播</strong>地址 )更新路由表–&gt;不安全 </li></ul></li><li>V2  无类网络<ul><li>更新发送的地址 224.0.0.09 (<strong>组播</strong>地址) 更新路由表 更新</li><li>路由认证  </li><li><img src="/2020/11/13/动态路由协议的原理+RIP/图6.png" title="This is an example image"><ul><li>明文认证</li><li>密文认证</li></ul></li></ul></li><li>NG  IPV6   </li></ul><p><strong>静默接口</strong> —- &gt; 如果一个接口被配置为静默接口那麽该接口只接受更新，不会主动发送更新</p><p>*<em>单播更新 *</em>—- &gt;指定具体IP地址，更新包只会发向该IP</p><img src="/2020/11/13/动态路由协议的原理+RIP/图7.png" title="This is an example image"><p><strong>更新方式</strong>：周期性+触发 </p><ul><li><p>周期性:30S  </p></li><li><p>老化时间：180S</p></li><li><p>垃圾时间：120S </p></li><li><p>每30秒，把自己知道的网络告诉别人一次，如果这个过程中某个网络断掉了，不会等到下一个30S，而是直接告诉别人，那个网络出现了故障，开启老化时间180S，如果这个设备确实出现了问题(180S到了以后)，进行垃圾处理时间(120S)</p></li><li><p>180S+120S =5MIN才能删除</p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;动态路由协议的原理-RIP&quot;&gt;&lt;a href=&quot;#动态路由协议的原理-RIP&quot; class=&quot;headerlink&quot; title=&quot;动态路由协议的原理+RIP&quot;&gt;&lt;/a&gt;动态路由协议的原理+RIP&lt;/h3&gt;&lt;h2 id=&quot;路由协议&quot;&gt;&lt;a href=&quot;#路由协议&quot;
      
    
    </summary>
    
    
      <category term="计算机网络" scheme="https://qiyuesanren.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
    
      <category term="RIP" scheme="https://qiyuesanren.github.io/tags/RIP/"/>
    
  </entry>
  
  <entry>
    <title>计算机网络基础</title>
    <link href="https://qiyuesanren.github.io/2020/11/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/"/>
    <id>https://qiyuesanren.github.io/2020/11/05/计算机网络基础/</id>
    <published>2020-11-05T20:22:47.000Z</published>
    <updated>2020-11-13T09:45:22.983Z</updated>
    
    <content type="html"><![CDATA[<p>话不多说，直接上图</p><img src="/2020/11/05/计算机网络基础/计算机网络基础.png" title="This is an example image"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">应用层    --&gt;人机交互接口--&gt; 你好，在嘛</span><br><span class="line">表示层    --&gt;编码解码，数据压缩--&gt; 010101</span><br><span class="line">会话层    --&gt;区分进程--&gt; QQ的数据</span><br><span class="line">传输层    --&gt;端到端的传输--&gt; 传输层+QQ的数据</span><br><span class="line">网络层    --&gt; 逻辑寻址，路由--&gt; 网络层+传输层+QQ的数据</span><br><span class="line">数据链路层--&gt;对信号进行还原验证，物理寻址--&gt; 数据链路层+网络层+传输层+QQ的数据+冗余校验值</span><br><span class="line">物理层    --&gt;电气，电压特性 ，接口针脚等规范--&gt; ~~~~ 电信号</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">集线器：将网线集中到一起的机器，即星型连接拓扑结构，多台电脑通过集线器对信号进行</span><br><span class="line"></span><br><span class="line">广播转发，实现互连互通，工作在物理层。</span><br><span class="line"></span><br><span class="line">中继器：连接同一个网络的两个或多个网段，通过放大信号来扩大网络传输的距离，工作在物理层。</span><br><span class="line"></span><br><span class="line">交换机：集线器的升级换代产品，不同于集线器的广播，它具备自动寻址能力和交换作用，将信息转发至指定端口，工作在数据链路层。</span><br><span class="line"></span><br><span class="line">网桥：将两个局域网（LAN）连起来，常用来扩展LAN，工作在数据链路层，网桥主要由软件实现，交换机主要由硬件实现。</span><br><span class="line"></span><br><span class="line">路由器：实现不同网络或网段之间互相连接，可以将不同网络间的数据信息进行转换，并根据IP进行寻址转发数据包，工作在网络层。</span><br><span class="line"></span><br><span class="line">网关：又叫协议转换器，能将异种网络互连起来，实现不同高层协议互相转换的网络互联设备。网关兼有路由器、网桥、中继器的特性。</span><br></pre></td></tr></table></figure><ul><li><p>CSMA/CD</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CSMA/CD 载波侦听,多路访问/冲突检测</span><br><span class="line">作用：快速以太网的介质访问控制方法</span><br><span class="line">特点：先听先发，边听边发，冲突停发，随机重发</span><br></pre></td></tr></table></figure></li><li><p>计算机网络系统的逻辑结构包括<code>通信子网</code>和<code>资源子网</code></p></li><li><p>决定局域网特性的主要检测技术一般认为有三个</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">传输介质</span><br><span class="line">介质访问控制方法</span><br><span class="line">拓扑结构--&gt;总线型，星型，树型，环形，全网状</span><br></pre></td></tr></table></figure></li><li><p>网络划分</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LAN(局域网) =路由技术</span><br><span class="line">MIN(个域网) 随身wifi  </span><br><span class="line">MAX 校园网</span><br><span class="line">WAN(广域网)=路由技术 (网络由运营商维护)</span><br></pre></td></tr></table></figure><p> Internet(因特网/注册商标)+广播电视+卫星通讯 <code>属于</code> internet(国际互联网)</p></li><li><p>冲突</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">一段链路中，双向信号产生冲突</span><br><span class="line">冲突域：产生冲突可能性的区域</span><br></pre></td></tr></table></figure></li><li><p>广播</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- 接收信号发送给所有人</span><br><span class="line">- 广播域：产生广播可能性的区域</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;话不多说，直接上图&lt;/p&gt;
&lt;img src=&quot;/2020/11/05/计算机网络基础/计算机网络基础.png&quot; title=&quot;This is an example image&quot;&gt;

&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;t
      
    
    </summary>
    
    
      <category term="计算机网络" scheme="https://qiyuesanren.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
    
      <category term="网络基础" scheme="https://qiyuesanren.github.io/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>Hello</title>
    <link href="https://qiyuesanren.github.io/2020/11/04/Hello/"/>
    <id>https://qiyuesanren.github.io/2020/11/04/Hello/</id>
    <published>2020-11-04T08:51:45.000Z</published>
    <updated>2020-11-13T09:45:36.763Z</updated>
    
    <content type="html"><![CDATA[<p>测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="分类" scheme="https://qiyuesanren.github.io/categories/%E5%88%86%E7%B1%BB/"/>
    
    
      <category term="标签" scheme="https://qiyuesanren.github.io/tags/%E6%A0%87%E7%AD%BE/"/>
    
  </entry>
  
</feed>
